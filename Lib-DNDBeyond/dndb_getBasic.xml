<net.rptools.maptool.model.MacroButtonProperties>
  <macroUUID>bacd4ca8-3fc0-4783-80b9-04cbf3b6da80</macroUUID>
  <saveLocation>Token</saveLocation>
  <index>41</index>
  <colorKey>default</colorKey>
  <hotKey>None</hotKey>
  <command>[h: toon = arg (0)]

&lt;!-- stuff it into a single json object --&gt;
&lt;!-- The easy bits --&gt;
&lt;!-- need this for init, and I need to come back and do an init DTO --&gt;
[h: abilities = dndb_getAbilities (toon)]
[h: log.info ("dndb_getBasic: Building base details")]
[h: basicToon = json.set ("", "name", replace (json.path.read (toon, "data.name"),"null", ""),
						"age", replace (json.path.read (toon, "data.age"),"null", ""),
						"faith", replace (json.path.read (toon, "data.faith"),"null", ""),
						"hair", replace (json.path.read (toon, "data.hair"),"null", ""),
						"eyes",  replace (json.path.read (toon, "data.eyes"),"null", ""),
						"skin", replace (json.path.read (toon, "data.skin"),"null", ""),
						"height", replace (json.path.read (toon, "data.height"),"null", ""),
						"weight", replace (json.path.read (toon, "data.weight"),"null", ""),
						"xp", replace (json.path.read (toon, "data.currentXp"),"null", ""),
						"gender", replace (json.path.read (toon, "data.gender"),"null", ""),
						"avatarUrl", replace (json.path.read (toon, "data.avatarUrl"),"null", ""),
						"url", replace (json.path.read (toon, "data.readonlyUrl"),"null", ""),
						"abilities", abilities)]

&lt;!-- init --&gt;
[h: log.info ("dndb_getBasic: Initiative")]
[h: init = json.get (abilities, "dexBonus")]
[h: basicToon = json.set (basicToon, "init", init)]

&lt;!-- alightment map --&gt;
[h: log.info ("dndb_getBasic: Alignment")]
[h: alignmentMap = json.set ("", "3", "CE")]
[h: alignmentId =  json.path.read (toon, "data.alignmentId")]
[h: basicToon = json.set (basicToon, "alignment", json.get (alignmentMap, alignmentId))]

&lt;!-- character level --&gt;
[h: log.info ("dndb_getBasic: Character level")]
[h: totalLevel = 0]
[h: classArry = ""]
[h, foreach (class, json.path.read (toon, "data.classes")), code: {
	[h: level = json.get (class, "level")]
	[h: totalLevel = totalLevel + level]
	[h: className = json.path.read (class, "definition.name")]
	[h: classObj = json.set ("", "className", className, "level", level)]
	[h: hitDice = json.path.read (class, "definition.hitDice")]
	[h: hitDiceUsed = json.get (class, "hitDiceUsed")]
	[h: classObj = json.set (classObj, "hitDice", hitDice, "hitDiceUsed", hitDiceUsed)]
	[h: classArry = json.append (classArry, classObj)]
}]
[h: log.debug ("classArry: "+ classArry)]
[h: basicToon = json.set (basicToon, "classes", classArry)]

&lt;!-- HP --&gt;
[h: log.info ("dndb_getBasic: Hitpoints")]
[h: hitPoints = dndb_getHitPoints (toon)]
[h: basicToon = json.set (basicToon, "hitPoints", hitPoints)]

&lt;!-- Speed --&gt;
[h: log.info ("dndb_getBasic: Speed")]
[h: speeds = dndb_getSpeed (toon)]
[h: basicToon = json.set (basicToon, "speeds", speeds)]
[h: log.info ("dndb_getBasic: Done!")]
[h: macro.return = basicToon]</command>
  <label>dndb_getBasic</label>
  <group>Character</group>
  <sortby/>
  <autoExecute>true</autoExecute>
  <includeLabel>false</includeLabel>
  <applyToTokens>false</applyToTokens>
  <fontColorKey>black</fontColorKey>
  <fontSize>1.00em</fontSize>
  <minWidth/>
  <maxWidth/>
  <allowPlayerEdits>false</allowPlayerEdits>
  <toolTip>Returns basic information of the character, including name, race, level, speed, and hit points 

arg (0) = toon</toolTip>
  <displayHotKey>true</displayHotKey>
  <commonMacro>false</commonMacro>
  <compareGroup>true</compareGroup>
  <compareSortPrefix>true</compareSortPrefix>
  <compareCommand>true</compareCommand>
  <compareIncludeLabel>true</compareIncludeLabel>
  <compareAutoExecute>true</compareAutoExecute>
  <compareApplyToSelectedTokens>true</compareApplyToSelectedTokens>
</net.rptools.maptool.model.MacroButtonProperties>
